(()=>{"use strict";const e=window.location.search.slice(1),t=()=>{const t=(()=>{const t={};return e?(e.split("&").forEach(function(e){const o=e.split("=");o[0]=o[0].replace("%5B%5D",""),t[o[0]]+=","+o[1],t[o[0]]=t[o[0]].replace("undefined",""),t[o[0]]=t[o[0]].replace(",,",","),t[o[0]].startsWith(",")&&(t[o[0]]=t[o[0]].slice(1)),t[o[0]].endsWith(",")&&(t[o[0]]=t[o[0]].slice(0,-1)),void 0!==t[o[0]]&&"undefined"!==t[o[0]]||(t[o[0]]="")}),t):t})(),o={};return Object.keys(t).forEach(e=>{if("s"===e||"keyword"===e){let s=String(t[e]||"");s=s.replace(/\+/g," "),s=decodeURIComponent(s),s=s.replace(/ã€€/g,"+"),s=encodeURIComponent(s),o.keyword=`keyword=${s}`}else if("vkfs_post_type"===e)o.post_type=`post_type=${t[e]}`;else if("vkfs_category"===e)o.category_name=`category_name=${t[e]}`,"and"===t.vkfs_category_operator&&(o.category_name=o.category_name.replace(/,/g,"+"));else if("vkfs_post_tag"===e)o.post_tag=`tag=${t[e]}`,"and"===t.vkfs_post_tag_operator&&(o.post_tag=o.post_tag.replace(/,/g,"+"));else if("vkfs_submitted"!==e&&"vkfs_form_id"!==e){if(-1===e.indexOf("_operator")){const s=e.replace("vkfs_","");o[s]=`${s}=${t[e]}`,"and"===t[`vkfs_${s}_operator`]&&(o[s]=o[s].replace(/,/g,"+"))}}else"vkfs_form_id"===e&&(o.vkfs_form_id=`vkfs_form_id=${t[e]}`)}),o};if(-1!==e.indexOf("vkfs_submitted=true")){const e=(()=>{const e={...t()};if(void 0===e.post_type&&(e.post_type="post_type=any"),e.post_type){const t=e.post_type.replace(/^post_type=/,"").split(",").filter(Boolean);if(t.includes("any")&&t.length>1){const o=t.filter(e=>"any"!==e);e.post_type=`post_type=${o.join(",")}`}}const o="undefined"!=typeof window&&void 0!==window.vk_filter_search_params?window.vk_filter_search_params:{},s=o.search_result_url||"",r=""!==s;let p=r?s:o.home_url||"";if(""===p)return null;let i=-1!==p.indexOf("?");void 0===e.keyword&&(e.keyword="keyword=");const _=e.keyword.replace(/^keyword=/,"s="),a=e=>{void 0!==e&&(i?p+="&"+e:(p+="?"+e,i=!0))};return void 0!==e.post_type&&a(r?e.post_type.replace(/^post_type=/,"vkfs_post_type="):e.post_type),a(e.category_name),a(e.post_tag),Object.keys(e).forEach(t=>{void 0!==e[t]&&"post_type"!==t&&"category_name"!==t&&"post_tag"!==t&&"keyword"!==t&&"vkfs_form_id"!==t&&a(e[t])}),a(r?e.keyword:_),a(e.vkfs_form_id),p})();e?window.location.replace?window.location.replace(e):window.location.href=e:console.warn("vkfs: redirect_url is invalid, skipping redirect")}})();